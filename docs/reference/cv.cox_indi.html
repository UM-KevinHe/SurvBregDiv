<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Cross-Validated cox_indi to Tune etas — cv.cox_indi • SurvBregDiv</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Cross-Validated cox_indi to Tune etas — cv.cox_indi"><meta name="description" content="Performs K-fold cross-validation over candidate etas. Internal data are split into folds.
For each fold, the model is trained on the internal training split plus the full external dataset,
then evaluated on the held-out internal fold."><meta property="og:description" content="Performs K-fold cross-validation over candidate etas. Internal data are split into folds.
For each fold, the model is trained on the internal training split plus the full external dataset,
then evaluated on the held-out internal fold."><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-54921687-5"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-54921687-5');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">SurvBregDiv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/SurvBregDiv.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-appendix" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Appendix</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-appendix"><li><a class="dropdown-item" href="../articles/CV_Criteria.html">CV Criteria</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/UM-KevinHe/SurvBregDiv" aria-label="GitHub repository"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cross-Validated cox_indi to Tune etas</h1>

      <div class="d-none name"><code>cv.cox_indi.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Performs K-fold cross-validation over candidate <code>etas</code>. Internal data are split into folds.
For each fold, the model is trained on the internal training split plus the full external dataset,
then evaluated on the held-out internal fold.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">cv.cox_indi</span><span class="op">(</span></span>
<span>  <span class="va">z_int</span>,</span>
<span>  <span class="va">delta_int</span>,</span>
<span>  <span class="va">time_int</span>,</span>
<span>  stratum_int <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">z_ext</span>,</span>
<span>  <span class="va">delta_ext</span>,</span>
<span>  <span class="va">time_ext</span>,</span>
<span>  stratum_ext <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">etas</span>,</span>
<span>  nfolds <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"V&amp;VH"</span>, <span class="st">"LinPred"</span>, <span class="st">"CIndex_pooled"</span>, <span class="st">"CIndex_foldaverage"</span><span class="op">)</span>,</span>
<span>  c_index_stratum <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_iter <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  tol <span class="op">=</span> <span class="fl">1e-07</span>,</span>
<span>  message <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-z-int-delta-int-time-int-stratum-int">z_int, delta_int, time_int, stratum_int<a class="anchor" aria-label="anchor" href="#arg-z-int-delta-int-time-int-stratum-int"></a></dt>
<dd><p>Internal data.</p></dd>


<dt id="arg-z-ext-delta-ext-time-ext-stratum-ext">z_ext, delta_ext, time_ext, stratum_ext<a class="anchor" aria-label="anchor" href="#arg-z-ext-delta-ext-time-ext-stratum-ext"></a></dt>
<dd><p>External data (always fully included in training).</p></dd>


<dt id="arg-etas">etas<a class="anchor" aria-label="anchor" href="#arg-etas"></a></dt>
<dd><p>Numeric vector of candidate eta values (must be provided).</p></dd>


<dt id="arg-nfolds">nfolds<a class="anchor" aria-label="anchor" href="#arg-nfolds"></a></dt>
<dd><p>Number of folds (default 5).</p></dd>


<dt id="arg-criteria">criteria<a class="anchor" aria-label="anchor" href="#arg-criteria"></a></dt>
<dd><p>Performance criterion.</p></dd>


<dt id="arg-c-index-stratum">c_index_stratum<a class="anchor" aria-label="anchor" href="#arg-c-index-stratum"></a></dt>
<dd><p>Optional stratum vector used for C-index evaluation on internal data.</p></dd>


<dt id="arg-max-iter-tol">max_iter, tol<a class="anchor" aria-label="anchor" href="#arg-max-iter-tol"></a></dt>
<dd><p>Passed to <code>cox_indi</code>.</p></dd>


<dt id="arg-message">message<a class="anchor" aria-label="anchor" href="#arg-message"></a></dt>
<dd><p>Logical; print progress (default FALSE).</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Optional seed for reproducible folds.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>"cv.cox_indi"</code> with components:</p><ul><li><p><code>internal_stat</code>: data.frame of CV stats by eta</p></li>
<li><p><code>beta_full</code>: matrix of full-data estimates (p x length(etas))</p></li>
<li><p><code>best</code>: list with <code>best_eta</code>, <code>best_beta</code>, <code>criteria</code></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co">## Load example individual-level data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ExampleData_indi</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">z_int</span>       <span class="op">&lt;-</span> <span class="va">ExampleData_indi</span><span class="op">$</span><span class="va">internal</span><span class="op">$</span><span class="va">z</span></span></span>
<span class="r-in"><span><span class="va">delta_int</span>   <span class="op">&lt;-</span> <span class="va">ExampleData_indi</span><span class="op">$</span><span class="va">internal</span><span class="op">$</span><span class="va">status</span></span></span>
<span class="r-in"><span><span class="va">time_int</span>    <span class="op">&lt;-</span> <span class="va">ExampleData_indi</span><span class="op">$</span><span class="va">internal</span><span class="op">$</span><span class="va">time</span></span></span>
<span class="r-in"><span><span class="va">stratum_int</span> <span class="op">&lt;-</span> <span class="va">ExampleData_indi</span><span class="op">$</span><span class="va">internal</span><span class="op">$</span><span class="va">stratum</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">z_ext</span>       <span class="op">&lt;-</span> <span class="va">ExampleData_indi</span><span class="op">$</span><span class="va">external</span><span class="op">$</span><span class="va">z</span></span></span>
<span class="r-in"><span><span class="va">delta_ext</span>   <span class="op">&lt;-</span> <span class="va">ExampleData_indi</span><span class="op">$</span><span class="va">external</span><span class="op">$</span><span class="va">status</span></span></span>
<span class="r-in"><span><span class="va">time_ext</span>    <span class="op">&lt;-</span> <span class="va">ExampleData_indi</span><span class="op">$</span><span class="va">external</span><span class="op">$</span><span class="va">time</span></span></span>
<span class="r-in"><span><span class="va">stratum_ext</span> <span class="op">&lt;-</span> <span class="va">ExampleData_indi</span><span class="op">$</span><span class="va">external</span><span class="op">$</span><span class="va">stratum</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Generate candidate eta values</span></span></span>
<span class="r-in"><span><span class="va">eta_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="generate_eta.html">generate_eta</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"exponential"</span>, n <span class="op">=</span> <span class="fl">50</span>, max_eta <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Cross-validated tuning of eta</span></span></span>
<span class="r-in"><span><span class="va">cv_fit</span> <span class="op">&lt;-</span> <span class="fu">cv.cox_indi</span><span class="op">(</span></span></span>
<span class="r-in"><span>  z_int <span class="op">=</span> <span class="va">z_int</span>,</span></span>
<span class="r-in"><span>  delta_int <span class="op">=</span> <span class="va">delta_int</span>,</span></span>
<span class="r-in"><span>  time_int <span class="op">=</span> <span class="va">time_int</span>,</span></span>
<span class="r-in"><span>  stratum_int <span class="op">=</span> <span class="va">stratum_int</span>,</span></span>
<span class="r-in"><span>  z_ext <span class="op">=</span> <span class="va">z_ext</span>,</span></span>
<span class="r-in"><span>  delta_ext <span class="op">=</span> <span class="va">delta_ext</span>,</span></span>
<span class="r-in"><span>  time_ext <span class="op">=</span> <span class="va">time_ext</span>,</span></span>
<span class="r-in"><span>  stratum_ext <span class="op">=</span> <span class="va">stratum_ext</span>,</span></span>
<span class="r-in"><span>  etas <span class="op">=</span> <span class="va">eta_list</span>,</span></span>
<span class="r-in"><span>  nfolds <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  criteria <span class="op">=</span> <span class="st">"CIndex_pooled"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yubo Shao.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

