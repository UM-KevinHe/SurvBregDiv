% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cox_MDTL_enet_bagging.R
\name{cox_MDTL_enet_bagging}
\alias{cox_MDTL_enet_bagging}
\title{Bagging for cv.cox_MDTL_enet}
\usage{
cox_MDTL_enet_bagging(
  z,
  delta,
  time,
  stratum = NULL,
  beta = NULL,
  vcov = NULL,
  etas,
  alpha = 1,
  B = 100,
  lambda = NULL,
  nlambda = 100,
  lambda.min.ratio = ifelse(nrow(z) < ncol(z), 0.01, 1e-04),
  nfolds = 5,
  cv.criteria = c("V&VH", "LinPred", "CIndex_pooled", "CIndex_foldaverage"),
  c_index_stratum = NULL,
  message = FALSE,
  seed = NULL,
  ...
)
}
\arguments{
\item{z}{Matrix of predictors (n x p).}

\item{delta}{Vector of event indicators.}

\item{time}{Vector of survival times.}

\item{stratum}{Vector indicating the stratum.}

\item{beta}{Vector of fixed external coefficients (length p). This is prior information and is \strong{not} resampled.}

\item{vcov}{Optional weighting matrix (p x p).}

\item{etas}{Sequence of eta values (transfer learning weights) to tune.}

\item{alpha}{The Elastic Net mixing parameter, with \eqn{0 \le \alpha \le 1}.
\code{alpha=1} is the lasso penalty, and \code{alpha=0} the ridge penalty. Default is 1.0.}

\item{B}{Integer. Number of bootstrap replicates. Default is 100.}

\item{lambda}{Optional user-supplied lambda sequence.}

\item{nlambda}{Number of lambda values.}

\item{lambda.min.ratio}{Ratio of min/max lambda.}

\item{nfolds}{Number of CV folds for the inner cross-validation.}

\item{cv.criteria}{Cross-validation criteria.}

\item{c_index_stratum}{Stratum vector for C-index calculation (if different from model stratum).}

\item{message}{Logical. If TRUE, shows a progress bar.}

\item{seed}{Integer. Seed for reproducibility.}

\item{...}{Additional arguments passed to \code{cv.cox_MDTL_enet}.}
}
\value{
An object of class \code{"cox_MDTL_bagging"} containing:
\itemize{
\item \code{best_beta}: The averaged coefficient vector across all valid bootstrap replicates.
\item \code{all_betas}: A matrix (p x B) of coefficients from each bootstrap replicate.
\item \code{B}: Number of requested replicates.
\item \code{valid_replicates}: Number of replicates that successfully converged.
\item \code{seed}: The seed used.
}
}
\description{
Implements bootstrap aggregation (bagging) for the \code{cv.cox_MDTL_enet} model.
It generates \code{B} bootstrap samples from the internal data, fits the Cross-Validated
Cox MDTL Elastic Net model on each sample, and aggregates the resulting coefficients.
}
\examples{
\donttest{
data(ExampleData_highdim)
train_dat_highdim <- ExampleData_highdim$train
beta_external_highdim <- ExampleData_highdim$beta_external

etas <- generate_eta(method = "exponential", n = 10, max_eta = 10)
bagging_res <- cox_MDTL_enet_bagging(
  z = train_dat_highdim$z,
  delta = train_dat_highdim$status,
  time = train_dat_highdim$time,
  stratum = train_dat_highdim$stratum,
  beta = beta_external_highdim,
  vcov = NULL,
  etas = etas,
  alpha = 0.5, # Elastic Net mixing
  B = 5,
  cv.criteria = "CIndex_pooled",
  message = TRUE,
  seed = 123
)
}
}
